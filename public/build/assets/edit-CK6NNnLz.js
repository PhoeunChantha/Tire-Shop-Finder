import{r as o,u as U,b as g,j as e,H as G}from"./app-m4SEsFiE.js";import{W as K}from"./website-layout-V4DO3rYZ.js";import{B as C}from"./button-B-WEzdAj.js";import{I as d}from"./input-5V3zXozb.js";import{L as l}from"./label-KmRgxdzX.js";import{T as k}from"./textarea-VzZyahIs.js";import{C as R,a as W,b as z,c as O}from"./card-DAZkrJCd.js";import{S as m}from"./searchable-select-DmSoQ5zD.js";import{T as Y}from"./time-range-picker-Bf0dvUz-.js";import{T as q,a as J,b as w,c as T}from"./tabs-CEAETiSQ.js";import{S as Q}from"./seo-fields-CxEgE878.js";import{A as X}from"./arrow-left-BwwF_eMh.js";import{B as Z}from"./building-CDBhthyV.js";import{G as I}from"./globe-CrBjwrOr.js";import{M as ee}from"./map-pin-BAgRtuu2.js";import{C as se}from"./clock-D1DRmoQH.js";/* empty css            */import"./dropdown-menu-BE1c-vsa.js";import"./index-D61C-zyG.js";import"./index-D5fK6wwI.js";import"./index-9BWeTyv_.js";import"./index-BMjyTS6w.js";import"./chevron-up-DZ2i7E5U.js";import"./check-Cd4UBeWr.js";import"./use-business-settings-z5aa--sV.js";import"./menu-BBZNjlwA.js";import"./send-BhHq3YGm.js";import"./external-link-MMDSQ-QP.js";import"./mail-BwgBbrBr.js";import"./search-DxnUE-sH.js";import"./chevrons-up-down-DL6jCn9c.js";import"./badge-CvBMkbv0.js";import"./image-upload-Bl86N5Wu.js";import"./upload-CVCRsBzD.js";import"./file-text-BETlvmro.js";import"./tag-A9Juhgz6.js";import"./plus-CnyTP5s-.js";function Ue({auth:ae,business:t,provinces:b}){const[p,_]=o.useState([]),[h,x]=o.useState([]),[E,c]=o.useState([]),[L,u]=o.useState(!1),[B,j]=o.useState(!1),[D,v]=o.useState(!1),[P,V]=o.useState("en"),{data:i,setData:r,put:F,processing:N,errors:a}=U({name:t.name||"",descriptions:t.descriptions||"",name_translations:t.name_translations||{en:t.name||"",km:""},descriptions_translations:t.descriptions_translations||{en:t.descriptions||"",km:""},province_id:t.province_id?.toString()||"",district_id:t.district_id?.toString()||"",commune_id:t.commune_id?.toString()||"",village_id:t.village_id?.toString()||"",latitude:t.latitude||"",longitude:t.longitude||"",opening_time:t.opening_time||"",closing_time:t.closing_time||"",seo_title:t.seo_title||"",seo_description:t.seo_description||"",seo_title_translations:t.seo_title_translations||{en:t.seo_title||"",km:""},seo_description_translations:t.seo_description_translations||{en:t.seo_description||"",km:""},seo_image:t.seo_image||"",seo_keywords:t.seo_keywords||[]});o.useEffect(()=>{t.province_id&&f(t.province_id.toString())},[]),o.useEffect(()=>{t.district_id&&p.length>0&&y(t.district_id.toString())},[p]),o.useEffect(()=>{t.commune_id&&h.length>0&&S(t.commune_id.toString())},[h]);const f=async s=>{if(s){u(!0);try{const n=await g.get(`/api/districts/${s}`);_(n.data)}catch(n){console.error("Error fetching districts:",n)}finally{u(!1)}}},y=async s=>{if(s){j(!0);try{const n=await g.get(`/api/communes/${s}`);x(n.data)}catch(n){console.error("Error fetching communes:",n)}finally{j(!1)}}},S=async s=>{if(s){v(!0);try{const n=await g.get(`/api/villages/${s}`);c(n.data)}catch(n){console.error("Error fetching villages:",n)}finally{v(!1)}}},$=async s=>{r("province_id",s),r("district_id",""),r("commune_id",""),r("village_id",""),_([]),x([]),c([]),s&&await f(s)},M=async s=>{r("district_id",s),r("commune_id",""),r("village_id",""),x([]),c([]),s&&await y(s)},H=async s=>{r("commune_id",s),r("village_id",""),c([]),s&&await S(s)},A=s=>{s.preventDefault(),F(`/businesses/${t.slug}`)};return e.jsxs(K,{children:[e.jsx(G,{title:`Edit ${t.name}`}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("a",{href:"/user-dashboard",className:"inline-flex items-center text-gray-600 hover:text-gray-700 mb-4",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Edit Your Tire Shop"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Update your business information to keep customers informed."})]})]}),e.jsxs(R,{children:[e.jsx(W,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Business Information"]})}),e.jsx(O,{children:e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Business Information"})]}),e.jsxs(q,{value:P,onValueChange:s=>V(s),children:[e.jsxs(J,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(w,{value:"en",className:"flex items-center gap-2",children:[e.jsx("span",{children:"🇺🇸"}),e.jsx("span",{children:"English"})]}),e.jsxs(w,{value:"km",className:"flex items-center gap-2",children:[e.jsx("span",{children:"🇰🇭"}),e.jsx("span",{children:"ខ្មែរ"})]})]}),e.jsxs(T,{value:"en",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"name_en",children:["Business Name (English) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{id:"name_en",type:"text",value:i.name_translations.en,onChange:s=>{const n=s.target.value;r("name_translations",{...i.name_translations,en:n}),r("name",n)},placeholder:"e.g., Phnom Penh Tire Center",className:a["name_translations.en"]?"border-red-500":""}),a["name_translations.en"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["name_translations.en"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"descriptions_en",children:"Business Description (English)"}),e.jsx(k,{id:"descriptions_en",value:i.descriptions_translations.en,onChange:s=>{const n=s.target.value;r("descriptions_translations",{...i.descriptions_translations,en:n}),r("descriptions",n)},placeholder:"Tell customers about your tire shop, services, and specialties...",rows:3,className:a["descriptions_translations.en"]?"border-red-500":""}),a["descriptions_translations.en"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["descriptions_translations.en"]})]})]}),e.jsxs(T,{value:"km",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name_km",children:"ឈ្មោះអាជីវកម្ម (ខ្មែរ)"}),e.jsx(d,{id:"name_km",type:"text",value:i.name_translations.km,onChange:s=>{r("name_translations",{...i.name_translations,km:s.target.value})},placeholder:"ឧ. ហាងកង់ភ្នំពេញ",className:a["name_translations.km"]?"border-red-500":""}),a["name_translations.km"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["name_translations.km"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"descriptions_km",children:"ការពិពណ៌នាអាជីវកម្ម (ខ្មែរ)"}),e.jsx(k,{id:"descriptions_km",value:i.descriptions_translations.km,onChange:s=>{r("descriptions_translations",{...i.descriptions_translations,km:s.target.value})},placeholder:"ប្រាប់អតិថិជនអំពីហាងកង់របស់អ្នក សេវាកម្ម និងឯកទេស...",rows:3,className:a["descriptions_translations.km"]?"border-red-500":""}),a["descriptions_translations.km"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["descriptions_translations.km"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Location"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{options:b.map(s=>({value:s.id.toString(),label:s.name})),value:i.province_id,onValueChange:$,placeholder:"Select Province",searchPlaceholder:"Search provinces...",emptyMessage:"No provinces found.",className:a.province_id?"border-red-500":""}),a.province_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.province_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:["District ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{options:p.map(s=>({value:s.id.toString(),label:s.name})),value:i.district_id,onValueChange:M,placeholder:"Select District",searchPlaceholder:"Search districts...",emptyMessage:"No districts found.",disabled:!i.province_id,loading:L,className:a.district_id?"border-red-500":""},`district-${i.province_id}`),a.district_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.district_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Commune"}),e.jsx(m,{options:h.map(s=>({value:s.id.toString(),label:s.name})),value:i.commune_id,onValueChange:H,placeholder:"Select Commune",searchPlaceholder:"Search communes...",emptyMessage:"No communes found.",disabled:!i.district_id,loading:B,className:a.commune_id?"border-red-500":""},`commune-${i.district_id}`),a.commune_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.commune_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Village"}),e.jsx(m,{options:E.map(s=>({value:s.id.toString(),label:s.name})),value:i.village_id,onValueChange:s=>r("village_id",s),placeholder:"Select Village",searchPlaceholder:"Search villages...",emptyMessage:"No villages found.",disabled:!i.commune_id,loading:D,className:a.village_id?"border-red-500":""},`village-${i.commune_id}`),a.village_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.village_id})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Business Hours & Location"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:["Business Hours ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Y,{startTime:i.opening_time,endTime:i.closing_time,onStartTimeChange:s=>r("opening_time",s),onEndTimeChange:s=>r("closing_time",s),startError:a.opening_time,endError:a.closing_time})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"latitude",children:["Latitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{id:"latitude",type:"text",value:i.latitude,onChange:s=>r("latitude",s.target.value),placeholder:"11.5564",className:a.latitude?"border-red-500":""}),a.latitude&&e.jsx("p",{className:"text-sm text-red-500",children:a.latitude})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"longitude",children:["Longitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{id:"longitude",type:"text",value:i.longitude,onChange:s=>r("longitude",s.target.value),placeholder:"104.9282",className:a.longitude?"border-red-500":""}),a.longitude&&e.jsx("p",{className:"text-sm text-red-500",children:a.longitude})]})]})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx(Q,{seoTitle:i.seo_title,seoDescription:i.seo_description,seoImage:i.seo_image,seoKeywords:i.seo_keywords,onSeoTitleChange:s=>r("seo_title",s),onSeoDescriptionChange:s=>r("seo_description",s),onSeoImageChange:s=>r("seo_image",s),onSeoKeywordsChange:s=>r("seo_keywords",s),errors:a})}),e.jsxs("div",{className:"flex justify-between space-x-4 pt-4",children:[e.jsx("a",{href:"/user-dashboard",children:e.jsx(C,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(C,{type:"submit",disabled:N,size:"lg",children:N?"Updating...":"Update Business"})]})]})})]})]})})]})}export{Ue as default};
