import{r as b,j as e,L as x,a as c,H as y}from"./app-m4SEsFiE.js";import{I as p,A as k}from"./app-layout-BumpU3EB.js";import{B as n}from"./button-B-WEzdAj.js";import{C as B,a as C,b as A,c as D}from"./card-DAZkrJCd.js";import{B as d}from"./badge-CvBMkbv0.js";import{D as S,P as T}from"./PaginationWrapper-Bp2rTVOg.js";import{A as _}from"./action-button-BLUJYvYe.js";import{D as M}from"./DeleteModal-BTtVXePO.js";import{g as L}from"./dropdown-menu-BE1c-vsa.js";import{P as h}from"./plus-CnyTP5s-.js";import{A as I,a as E}from"./arrow-up-CudfrPlc.js";import{T as F}from"./toggle-right-BhYlkflX.js";import{T as H}from"./toggle-left-BkwfKXxV.js";/* empty css            */import"./index-89Llf8Yk.js";import"./index-D61C-zyG.js";import"./index-9BWeTyv_.js";import"./index-D5fK6wwI.js";import"./collapsible-CJSf55eg.js";import"./chevron-right-BHx-thNb.js";import"./app-logo-icon-BvgPms2S.js";import"./use-business-settings-z5aa--sV.js";import"./building-CDBhthyV.js";import"./users-CCvNB95W.js";import"./shield-BLMtoxU7.js";import"./avatar-7NHQ17s9.js";import"./input-5V3zXozb.js";import"./select-Bucetb1j.js";import"./index-CXFdqqwl.js";import"./chevron-up-DZ2i7E5U.js";import"./check-Cd4UBeWr.js";import"./filter-AGlDKPsx.js";import"./tag-A9Juhgz6.js";import"./calendar-DFZ-2_aj.js";import"./search-DxnUE-sH.js";import"./chevron-left-CWJJo8rP.js";import"./refresh-cw-Tfuecpvj.js";import"./trash-2-BkS2BnsL.js";import"./square-pen-DmLpV6cU.js";import"./eye-CCNsDBNk.js";import"./dialog-B3QHYN-w.js";import"./triangle-alert-DzJNMw5Q.js";import"./index-BMjyTS6w.js";function P({banners:a,filters:l}){const[r,i]=b.useState({open:!1,banner:null,processing:!1}),g=t=>{i({open:!0,banner:t,processing:!1})},f=()=>{r.banner&&(i(t=>({...t,processing:!0})),c.delete(route("banners.destroy",r.banner.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{i({open:!1,banner:null,processing:!1})},onError:()=>{i(t=>({...t,processing:!1}))}}))},j=t=>[{key:"view",label:"View",href:route("banners.show",t.id)},{key:"edit",label:"Edit",href:route("banners.edit",t.id)},{key:t.is_active?"deactivate":"activate",label:t.is_active?"Deactivate":"Activate",onClick:()=>w(t.id,t.is_active),className:t.is_active?"text-orange-600":"text-green-600"},{key:"delete",label:"Delete",onClick:()=>g(t),className:"text-red-600"}],v={search:{enabled:!0,placeholder:"Search banners...",debounce:300},perPage:{enabled:!0,default:10},quickFilters:[{type:"select",key:"status",placeholder:"Filter by Status",options:[{value:"",label:"All Banners"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]}]},N=t=>t.is_active?e.jsxs(d,{className:"bg-green-100 text-green-800",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(d,{className:"bg-gray-100 text-gray-800",children:[e.jsx(H,{className:"w-3 h-3 mr-1"}),"Inactive"]}),o=t=>t.image?L(t.image,"banners"):null,m=(t,s)=>{c.post(route("banners.sort"),{banner_id:t,direction:s},{preserveState:!0,preserveScroll:!0})},w=(t,s)=>{c.patch(route("banners.toggle-status",t),{is_active:!s},{preserveState:!0,preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Banners"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage website banners and promotional content"})]}),e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("banners.create"),children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Add Banner"]})})]}),e.jsxs(B,{children:[e.jsxs(C,{children:[e.jsx(A,{children:"All Banners"}),e.jsx(S,{filters:l,config:v,routeName:"banners.index"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-4",children:[a.data.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative w-40 h-40 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:o(t)?e.jsx("img",{src:o(t),alt:t.title,className:"w-full h-full object-cover",onError:s=>{console.log("Failed to load banner image:",o(t)),console.log("Original image path:",t.image),s.currentTarget.style.display="none";const u=s.currentTarget.parentElement;u&&(u.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-100"><svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>')},onLoad:()=>{console.log("Successfully loaded banner image:",o(t))}}):e.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:[e.jsx(p,{className:"w-6 h-6 text-muted-foreground"}),e.jsx("span",{className:"sr-only",children:"No image"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-foreground truncate",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t.descriptions}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[N(t),e.jsxs(d,{variant:"outline",className:"text-xs",children:["Order: ",t.sort_order]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Created by ",t.creator.name," â€¢ ",new Date(t.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>m(t.id,"up"),title:"Move Up",children:e.jsx(I,{className:"w-3 h-3"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>m(t.id,"down"),title:"Move Down",children:e.jsx(E,{className:"w-3 h-3"})})]}),e.jsx(_,{actions:j(t),item:t,layout:"dropdown",maxInline:3})]})]},t.id)),a.data.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-foreground",children:"No banners"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Get started by creating a new banner."}),e.jsx("div",{className:"mt-6",children:e.jsx(n,{asChild:!0,children:e.jsxs(x,{href:route("banners.create"),children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Add Banner"]})})})]})]}),a.data.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(T,{data:a,filters:l,routeName:"banners.index"})})]})]}),e.jsx(M,{open:r.open,setOpen:t=>i(s=>({...s,open:t})),onConfirm:f,title:"Delete Banner",description:"Are you sure you want to delete this banner? This action cannot be undone and will remove the banner from your website.",itemName:r.banner?.title||"",confirmText:"Delete Banner",processing:r.processing})]})}function De({auth:a,banners:l,filters:r}){return e.jsxs(k,{children:[e.jsx(y,{title:"Banner Management"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsx(P,{banners:l,filters:r})})]})}export{De as default};
