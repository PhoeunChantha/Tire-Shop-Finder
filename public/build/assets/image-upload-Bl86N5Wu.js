import{r as x,j as s}from"./app-m4SEsFiE.js";import{B as h}from"./button-B-WEzdAj.js";import{L as C}from"./label-KmRgxdzX.js";import{U as R}from"./upload-CVCRsBzD.js";import{X as g}from"./index-9BWeTyv_.js";function z({label:u,value:e,onChange:c,accept:j="image/*",maxSize:n=5,preview:d=!0,placeholder:I="Select an image or enter URL",error:i,className:N="",allowUrl:$=!1}){const r=x.useRef(null),[y,o]=x.useState(!1),m=t=>{if(t.size>n*1024*1024){alert(`File size must be less than ${n}MB`);return}c(t)},b=t=>{t.preventDefault(),o(!1);const p=Array.from(t.dataTransfer.files).find(L=>L.type.startsWith("image/"));p&&m(p)},w=t=>{t.preventDefault(),o(!0)},D=t=>{t.preventDefault(),o(!1)},F=t=>{const l=t.target.files?.[0];l&&m(l)},f=()=>{c(null),r.current&&(r.current.value="")},U=()=>e instanceof File?URL.createObjectURL(e):typeof e=="string"&&e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:e.startsWith("uploads/")?`/${e}`:`/storage/banners/${e}`:null,v=()=>e instanceof File?e.name:typeof e=="string"&&e?e.split("/").pop()||e:null,a=U();return s.jsxs("div",{className:`space-y-3 ${N}`,children:[s.jsx(C,{className:"flex items-center gap-2",children:u}),s.jsxs("div",{className:`
                        border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
                        ${y?"border-blue-500 bg-blue-50":"border-gray-300"}
                        ${i?"border-red-500":""}
                        hover:border-gray-400 hover:bg-gray-50
                    `,onDrop:b,onDragOver:w,onDragLeave:D,onClick:()=>r.current?.click(),children:[s.jsx("input",{ref:r,type:"file",accept:j,onChange:F,className:"hidden"}),e?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["âœ“ ",v()]}),e instanceof File&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(e.size/(1024*1024)).toFixed(2)," MB"]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(R,{className:"w-8 h-8 mx-auto text-gray-400"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"}),s.jsx("span",{className:"text-gray-600",children:" or drag and drop"})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["PNG, JPG, GIF up to ",n,"MB"]})]})]}),d&&a&&s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:a,alt:"Preview",className:"w-full max-w-md h-32 object-cover rounded-lg border",onError:t=>{console.error("Image preview failed to load:",a),console.error("Original value:",e),t.currentTarget.style.display="none"},onLoad:()=>{console.log("Image preview loaded successfully:",a)}}),s.jsx(h,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:f,children:s.jsx(g,{className:"w-4 h-4"})})]}),e&&!d&&s.jsxs(h,{type:"button",variant:"outline",size:"sm",onClick:f,children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"Clear"]}),i&&s.jsx("p",{className:"text-sm text-red-500",children:i}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recommended: 1200x630 pixels for optimal social media display"})]})}export{z as I};
