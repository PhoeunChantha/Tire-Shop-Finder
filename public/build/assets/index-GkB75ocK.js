import{r as m,u as D,j as e,H as v}from"./app-m4SEsFiE.js";import{A as y}from"./app-layout-BumpU3EB.js";import{C as M,a as T,b as w,d as A,c as O}from"./card-DAZkrJCd.js";import{D as S}from"./DeleteModal-BTtVXePO.js";import{D as E,P as H}from"./PaginationWrapper-Bp2rTVOg.js";import{T as k,a as B,b as N,c,d as P,e as d}from"./table-zhjCq3UJ.js";import{B as C}from"./badge-CvBMkbv0.js";import{A as U}from"./action-button-BLUJYvYe.js";import{S as b}from"./shield-BLMtoxU7.js";import{U as I}from"./users-CCvNB95W.js";import _ from"./create-CPX-4Ekp.js";import F from"./edit-DNWgzMMX.js";/* empty css            */import"./button-B-WEzdAj.js";import"./index-89Llf8Yk.js";import"./index-D61C-zyG.js";import"./index-9BWeTyv_.js";import"./index-D5fK6wwI.js";import"./dropdown-menu-BE1c-vsa.js";import"./index-BMjyTS6w.js";import"./collapsible-CJSf55eg.js";import"./chevron-right-BHx-thNb.js";import"./app-logo-icon-BvgPms2S.js";import"./use-business-settings-z5aa--sV.js";import"./building-CDBhthyV.js";import"./avatar-7NHQ17s9.js";import"./dialog-B3QHYN-w.js";import"./triangle-alert-DzJNMw5Q.js";import"./input-5V3zXozb.js";import"./select-Bucetb1j.js";import"./index-CXFdqqwl.js";import"./chevron-up-DZ2i7E5U.js";import"./check-Cd4UBeWr.js";import"./filter-AGlDKPsx.js";import"./tag-A9Juhgz6.js";import"./calendar-DFZ-2_aj.js";import"./search-DxnUE-sH.js";import"./chevron-left-CWJJo8rP.js";import"./refresh-cw-Tfuecpvj.js";import"./trash-2-BkS2BnsL.js";import"./square-pen-DmLpV6cU.js";import"./eye-CCNsDBNk.js";import"./use-roleForm-C9P81GkB.js";import"./label-KmRgxdzX.js";import"./checkbox-BcpP1FIe.js";import"./InputError-CjroZfWt.js";import"./plus-CnyTP5s-.js";import"./user-cog-CkW8tt9I.js";function L(){const[i,o]=m.useState(null),[t,s]=m.useState(!1),[a,l]=m.useState(null),[p,n]=m.useState(!1),{delete:x,processing:u}=D(),h=()=>{},f=()=>{},j=r=>{o(r),s(!0)},g=r=>{l(r),n(!0)};return{editingRole:i,setEditingRole:o,editModalOpen:t,setEditModalOpen:s,deletingRole:a,setDeletingRole:l,deleteModalOpen:p,setDeleteModalOpen:n,deleting:u,handleDeleteConfirm:()=>{a&&x(route("roles.destroy",a.id),{preserveScroll:!0,onSuccess:()=>{n(!1),l(null)},onError:r=>{console.log("Delete errors:",r)}})},handleRoleCreated:h,handleRoleUpdated:f,getRoleActions:r=>[{key:"edit",label:"Edit",onClick:R=>{j(R)},variant:"outline"},{key:"delete",label:"Delete",onClick:R=>{g(R)},variant:"outline",className:"text-red-600 hover:text-red-700"}],filterConfig:{search:{enabled:!0,placeholder:"Search roles by name...",debounce:300},perPage:{enabled:!0,default:10}}}}function W({roles:i,getRoleActions:o}){return e.jsx("div",{className:"rounded-md border",children:e.jsxs(k,{children:[e.jsx(B,{children:e.jsxs(N,{children:[e.jsx(c,{children:"Role Name"}),e.jsx(c,{children:"Permissions"}),e.jsx(c,{children:"Users"}),e.jsx(c,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(P,{children:i.data?.length?i.data.map(t=>e.jsxs(N,{children:[e.jsx(d,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground"}),t.display_name||t.name]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions&&t.permissions.length>0?t.permissions.slice(0,3).map(s=>e.jsx(C,{variant:"secondary",className:"text-xs",children:s.display_name||s.name},s.id)):e.jsx(C,{variant:"outline",className:"text-xs",children:"No permissions"}),t.permissions&&t.permissions.length>3&&e.jsxs(C,{variant:"outline",className:"text-xs",children:["+",t.permissions.length-3," more"]})]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[t.users?.length||0," users"]})]})}),e.jsx(d,{children:e.jsx(U,{actions:o(t),item:t,layout:"dropdown",maxInline:1})})]},t.id)):e.jsx(N,{children:e.jsx(d,{colSpan:4,className:"h-24 text-center",children:"No roles found. Create your first role to get started."})})})]})})}function Fe({auth:i,roles:o,permissions:t,filters:s}){const{editingRole:a,editModalOpen:l,setEditModalOpen:p,deleteModalOpen:n,setDeleteModalOpen:x,deletingRole:u,getRoleActions:h,deleting:f,handleDeleteConfirm:j,filterConfig:g}=L();return e.jsxs(y,{children:[e.jsx(v,{title:"Roles"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs(M,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Roles"]}),e.jsx(A,{children:"Manage user roles and permissions"})]}),e.jsx(_,{permissions:t,triggerText:"Add Role"})]}),e.jsxs(O,{children:[e.jsx(E,{filters:s||{},config:g}),e.jsx(W,{roles:o,getRoleActions:h}),e.jsx(H,{paginatedData:o})]})]})}),e.jsx(F,{role:a,permissions:t,open:l,onOpenChange:p}),e.jsx(S,{open:n,setOpen:x,onConfirm:j,title:"Delete Role",description:"Are you sure you want to delete this role? This action cannot be undone and will remove all associated permissions.",itemName:u?.name,confirmText:"Delete Role",processing:f})]})}export{Fe as default};
