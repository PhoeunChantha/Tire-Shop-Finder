import{j as e,r as b,u as y}from"./app-m4SEsFiE.js";import{I as P}from"./input-5V3zXozb.js";import{L as w}from"./label-KmRgxdzX.js";import{B as N}from"./button-B-WEzdAj.js";import{I as C}from"./InputError-CjroZfWt.js";import{P as E}from"./plus-CnyTP5s-.js";import{M as S}from"./minus-iT1XeTgz.js";function V({onSubmit:f,submitText:m="Submit",isEdit:r=!1,data:t,errors:o,processing:n,nameErrors:l,handleNameChange:j,addPermission:v,removePermission:p}){return e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:t.name.map((d,s)=>e.jsxs("div",{className:"flex items-start gap-4 permission-item",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs(w,{htmlFor:`name-${s}`,children:["Permission Name ",t.name.length>1?`#${s+1}`:""]}),e.jsx(P,{id:`name-${s}`,type:"text",value:d,onChange:g=>j(s,g),placeholder:"Enter permission name (e.g., user-view, user-create)",disabled:n}),l[s]&&e.jsx("p",{className:"text-sm text-red-600",children:l[s]}),e.jsx(C,{message:o?.name?.[s]}),s===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:'Spaces will be automatically converted to hyphens and text will be lowercase (e.g., "User View" â†’ "user-view").'})]}),!r&&e.jsxs("div",{className:"flex gap-2 mt-6",children:[s===t.name.length-1&&e.jsx(N,{type:"button",onClick:v,variant:"outline",children:e.jsx(E,{className:"h-4 w-4"})}),t.name.length>1&&e.jsx(N,{type:"button",onClick:()=>p(s),variant:"outline",children:e.jsx(S,{className:"h-4 w-4"})})]})]},s))}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{type:"submit",disabled:n||t.name.length===0||t.name.some(d=>!d.trim()),children:n?`${m}...`:m})})]})}function _(f={}){const[m,r]=b.useState([]),{data:t,setData:o,post:n,put:l,processing:j,errors:v,reset:p}=y({name:[""],...f});return{data:t,setData:o,post:n,put:l,processing:j,errors:v,reset:p,nameErrors:m,handleNameChange:(a,c)=>{const h=c.target.value,u=h.toLowerCase().replace(/\s+/g,"-"),i=[...t.name];i[a]=u;const x=[...m];h!==u?x[a]="Auto-formatted to: "+u:x[a]="",o("name",i),r(x)},addPermission:()=>{o("name",[...t.name,""]),r([...m,""])},removePermission:a=>{const c=t.name.filter((u,i)=>i!==a),h=m.filter((u,i)=>i!==a);o("name",c),r(h)},submitCreate:a=>{a.preventDefault(),r([]),n(route("permissions.store"),{onSuccess:()=>{p(),r([])}})},submitUpdate:a=>c=>{c.preventDefault(),r([]),l(route("permissions.update",a),{onSuccess:()=>{r([])}})}}}export{V as P,_ as u};
