import{j as e,r as P,u as w}from"./app-m4SEsFiE.js";import{I as S}from"./input-5V3zXozb.js";import{L as f}from"./label-KmRgxdzX.js";import{B as E}from"./button-B-WEzdAj.js";import{C as v}from"./checkbox-BcpP1FIe.js";import{I as y}from"./InputError-CjroZfWt.js";function A({permissions:g,onSubmit:j,submitText:a="Submit",isEdit:m=!1,data:t,errors:c,processing:o,nameError:u,handleNameChange:b,handlePermissionChange:h,handleModuleCheckboxChange:C}){const x=g.reduce((i,d)=>{const s=d.module||"General";return i[s]||(i[s]=[]),i[s].push(d),i},{});return e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"name",children:"Role Name"}),e.jsx(S,{id:"name",type:"text",value:t.name,onChange:b,placeholder:"Enter role name (e.g., admin, editor)",disabled:o,required:!0}),u&&e.jsx("p",{className:"text-sm text-blue-600",children:u}),e.jsx(y,{message:c?.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Spaces will be automatically converted to hyphens and text will be lowercase (e.g., "Super Admin" â†’ "super-admin")'})]}),Object.keys(x).length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-4  border rounded-lg p-4 max-h-64 overflow-y-auto",children:Object.entries(x).map(([i,d])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-sm text-gray-700 capitalize",children:[e.jsx(v,{id:`permission-${i}`,checked:t.permissions.some(s=>d.some(r=>r.id===s)),onCheckedChange:s=>C(x,i,!!s),disabled:o}),e.jsx(f,{htmlFor:`permission-${i}`,className:"font-semibold text-sm text-black capitalize cursor-pointer",children:i})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 pl-4 border-l-2 border-gray-100",children:d.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{id:`permission-${s.id}`,checked:t.permissions.includes(s.id),onCheckedChange:r=>h(s.id,!!r),disabled:o}),e.jsx(f,{htmlFor:`permission-${s.id}`,className:"text-sm font-normal cursor-pointer",children:s.display_name})]},s.id))})]},i))}),e.jsx(y,{message:c?.permissions})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(E,{type:"submit",disabled:o||!t.name.trim(),children:o?`${a}...`:a})})]})}function B(g={}){const[j,a]=P.useState(""),{data:m,setData:t,post:c,put:o,processing:u,errors:b,reset:h}=w({name:"",permissions:[],...g});return{data:m,setData:t,post:c,put:o,processing:u,errors:b,reset:h,nameError:j,handleNameChange:r=>{const n=r.target.value,l=n.toLowerCase().replace(/\s+/g,"-");a(n!==l?"Auto-formatted to: "+l:""),t("name",l)},handlePermissionChange:(r,n)=>{n?t("permissions",[...m.permissions,r]):t("permissions",m.permissions.filter(l=>l!==r))},handleModuleCheckboxChange:(r,n,l)=>{const N=(r[n]||[]).map(p=>p.id);if(l){const p=[...new Set([...m.permissions,...N])];t("permissions",p)}else{const p=m.permissions.filter(k=>!N.includes(k));t("permissions",p)}},submitCreate:r=>{r.preventDefault(),a(""),c(route("roles.store"),{onSuccess:()=>{h(),a("")}})},submitUpdate:r=>n=>{n.preventDefault(),a(""),o(route("roles.update",r),{onSuccess:()=>{a("")}})}}}export{A as R,B as u};
