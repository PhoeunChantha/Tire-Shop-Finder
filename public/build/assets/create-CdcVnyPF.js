import{r as o,u as R,j as e,H as G,b as g}from"./app-m4SEsFiE.js";import{A as z}from"./app-layout-BumpU3EB.js";import{B as k}from"./button-B-WEzdAj.js";import{I as l}from"./input-5V3zXozb.js";import{L as n}from"./label-KmRgxdzX.js";import{T as m}from"./textarea-VzZyahIs.js";import{C as I,a as K,b as q,c as J}from"./card-DAZkrJCd.js";import{S as c}from"./searchable-select-DmSoQ5zD.js";import{T as Q}from"./time-range-picker-Bf0dvUz-.js";import{S as C}from"./switch-D_Yjk-lk.js";import{T as S,a as w,b as x,c as p}from"./tabs-CEAETiSQ.js";import{I as W}from"./image-upload-Bl86N5Wu.js";import{B as X}from"./building-CDBhthyV.js";import{G as Y}from"./globe-CrBjwrOr.js";import{M as Z}from"./map-pin-BAgRtuu2.js";import{C as ee}from"./clock-D1DRmoQH.js";import{S as E}from"./dropdown-menu-BE1c-vsa.js";/* empty css            */import"./index-89Llf8Yk.js";import"./index-D61C-zyG.js";import"./index-9BWeTyv_.js";import"./index-D5fK6wwI.js";import"./collapsible-CJSf55eg.js";import"./chevron-right-BHx-thNb.js";import"./app-logo-icon-BvgPms2S.js";import"./use-business-settings-z5aa--sV.js";import"./users-CCvNB95W.js";import"./shield-BLMtoxU7.js";import"./avatar-7NHQ17s9.js";import"./chevrons-up-down-DL6jCn9c.js";import"./search-DxnUE-sH.js";import"./check-Cd4UBeWr.js";import"./index-CXFdqqwl.js";import"./index-BMjyTS6w.js";import"./upload-CVCRsBzD.js";function De({auth:se,provinces:$,users:T}){const[B,u]=o.useState([]),[F,h]=o.useState([]),[L,d]=o.useState([]),[V,j]=o.useState(!1),[O,v]=o.useState(!1),[P,N]=o.useState(!1),[f,b]=o.useState("en"),{data:t,setData:i,post:D,processing:y,errors:a}=R({name:"",descriptions:"",name_translations:{en:"",km:""},descriptions_translations:{en:"",km:""},created_by:"",province_id:"",district_id:"",commune_id:"",village_id:"",latitude:"",longitude:"",opening_time:"",closing_time:"",status:!0,is_vierify:!0,seo_title:"",seo_description:"",seo_title_translations:{en:"",km:""},seo_description_translations:{en:"",km:""},seo_image:"",seo_keywords:[],image:null}),M=async s=>{if(i("province_id",s),i("district_id",""),i("commune_id",""),i("village_id",""),u([]),h([]),d([]),s){j(!0);try{const r=await g.get(`/admin/api/districts/${s}`);u(r.data)}catch(r){console.error("Error fetching districts:",r)}finally{j(!1)}}},A=async s=>{if(i("district_id",s),i("commune_id",""),i("village_id",""),h([]),d([]),s){v(!0);try{const r=await g.get(`/admin/api/communes/${s}`);h(r.data)}catch(r){console.error("Error fetching communes:",r)}finally{v(!1)}}},H=async s=>{if(i("commune_id",s),i("village_id",""),d([]),s){N(!0);try{const r=await g.get(`/admin/api/villages/${s}`);d(r.data)}catch(r){console.error("Error fetching villages:",r)}finally{N(!1)}}},U=s=>{s.preventDefault(),D(route("businesses.store"))};return e.jsxs(z,{children:[e.jsx(G,{title:"Create Business"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs(I,{children:[e.jsxs(K,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Create New Business"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Create a new tire shop business listing for a user."})]}),e.jsx(J,{children:e.jsxs("form",{onSubmit:U,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[e.jsx(Y,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Business Information"})]}),e.jsxs(S,{value:f,onValueChange:s=>b(s),children:[e.jsxs(w,{className:"grid w-full grid-cols-2 mb-6 max-w-md",children:[e.jsxs(x,{value:"en",className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‡ºðŸ‡¸"}),e.jsx("span",{children:"English"})]}),e.jsxs(x,{value:"km",className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‡°ðŸ‡­"}),e.jsx("span",{children:"ážáŸ’áž˜áŸ‚ážš"})]})]}),e.jsxs(p,{value:"en",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"name_en",children:["Business Name (English) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{id:"name_en",type:"text",value:t.name_translations.en,onChange:s=>{const r=s.target.value;i("name_translations",{...t.name_translations,en:r}),i("name",r)},placeholder:"e.g., Phnom Penh Tire Center",className:`max-w-2xl ${a["name_translations.en"]||a.name?"border-red-500":""}`}),(a["name_translations.en"]||a.name)&&e.jsx("p",{className:"text-sm text-red-500",children:a["name_translations.en"]||a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["Select User Business Owner ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{options:T.map(s=>({value:s.id.toString(),label:`${s.name} (${s.email})`})),value:t.created_by,onValueChange:s=>i("created_by",s),placeholder:"Select business owner",searchPlaceholder:"Search users...",emptyMessage:"No users found.",className:`max-w-2xl ${a.created_by?"border-red-500":""}`}),a.created_by&&e.jsx("p",{className:"text-sm text-red-500",children:a.created_by})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"descriptions_en",children:"Business Description (English)"}),e.jsx(m,{id:"descriptions_en",value:t.descriptions_translations.en,onChange:s=>{const r=s.target.value;i("descriptions_translations",{...t.descriptions_translations,en:r}),i("descriptions",r)},placeholder:"Tell customers about the tire shop, services, and specialties...",rows:3,className:`max-w-2xl ${a["descriptions_translations.en"]||a.descriptions?"border-red-500":""}`}),(a["descriptions_translations.en"]||a.descriptions)&&e.jsx("p",{className:"text-sm text-red-500",children:a["descriptions_translations.en"]||a.descriptions})]})]}),e.jsxs(p,{value:"km",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name_km",children:"ážˆáŸ’áž˜áŸ„áŸ‡áž¢áž¶áž‡áž¸ážœáž€áž˜áŸ’áž˜ (ážáŸ’áž˜áŸ‚ážš)"}),e.jsx(l,{id:"name_km",type:"text",value:t.name_translations.km,onChange:s=>{i("name_translations",{...t.name_translations,km:s.target.value})},placeholder:"áž§. áž áž¶áž„áž€áž„áŸ‹áž—áŸ’áž“áŸ†áž–áŸáž‰",className:`max-w-2xl ${a["name_translations.km"]?"border-red-500":""}`}),a["name_translations.km"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["name_translations.km"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"descriptions_km",children:"áž€áž¶ážšáž–áž·áž–ážŽáŸŒáž“áž¶áž¢áž¶áž‡áž¸ážœáž€áž˜áŸ’áž˜ (ážáŸ’áž˜áŸ‚ážš)"}),e.jsx(m,{id:"descriptions_km",value:t.descriptions_translations.km,onChange:s=>{i("descriptions_translations",{...t.descriptions_translations,km:s.target.value})},placeholder:"áž”áŸ’ážšáž¶áž”áŸ‹áž¢ážáž·ážáž·áž‡áž“áž¢áŸ†áž–áž¸áž áž¶áž„áž€áž„áŸ‹ ážŸáŸážœáž¶áž€áž˜áŸ’áž˜ áž“áž·áž„áž‡áŸ†áž“áž¶áž‰...",rows:3,className:`max-w-2xl ${a["descriptions_translations.km"]?"border-red-500":""}`}),a["descriptions_translations.km"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["descriptions_translations.km"]})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(W,{label:"Business Image",value:t.image,onChange:(s,r)=>{s?i("image",s):r?i("image",r):i("image",null)},error:a.image,className:"max-w-2xl",placeholder:"Upload business image or enter URL"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Location"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{options:$.map(s=>({value:s.id.toString(),label:s.name})),value:t.province_id,onValueChange:M,placeholder:"Select Province",searchPlaceholder:"Search provinces...",emptyMessage:"No provinces found.",className:a.province_id?"border-red-500":""}),a.province_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.province_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{children:["District ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(c,{options:B.map(s=>({value:s.id.toString(),label:s.name})),value:t.district_id,onValueChange:A,placeholder:"Select District",searchPlaceholder:"Search districts...",emptyMessage:"No districts found.",disabled:!t.province_id,loading:V,className:a.district_id?"border-red-500":""},`district-${t.province_id}`),a.district_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.district_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Commune"}),e.jsx(c,{options:F.map(s=>({value:s.id.toString(),label:s.name})),value:t.commune_id,onValueChange:H,placeholder:"Select Commune",searchPlaceholder:"Search communes...",emptyMessage:"No communes found.",disabled:!t.district_id,loading:O,className:a.commune_id?"border-red-500":""},`commune-${t.district_id}`),a.commune_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.commune_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Village"}),e.jsx(c,{options:L.map(s=>({value:s.id.toString(),label:s.name})),value:t.village_id,onValueChange:s=>i("village_id",s),placeholder:"Select Village",searchPlaceholder:"Search villages...",emptyMessage:"No villages found.",disabled:!t.commune_id,loading:P,className:a.village_id?"border-red-500":""},`village-${t.commune_id}`),a.village_id&&e.jsx("p",{className:"text-sm text-red-500",children:a.village_id})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Business Hours & Coordinates"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Business Hours"}),e.jsx(Q,{startTime:t.opening_time,endTime:t.closing_time,onStartTimeChange:s=>i("opening_time",s),onEndTimeChange:s=>i("closing_time",s),startError:a.opening_time,endError:a.closing_time})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"latitude",children:["Latitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{id:"latitude",type:"text",value:t.latitude,onChange:s=>i("latitude",s.target.value),placeholder:"11.5564",className:a.latitude?"border-red-500":""}),a.latitude&&e.jsx("p",{className:"text-sm text-red-500",children:a.latitude})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"longitude",children:["Longitude ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{id:"longitude",type:"text",value:t.longitude,onChange:s=>i("longitude",s.target.value),placeholder:"104.9282",className:a.longitude?"border-red-500":""}),a.longitude&&e.jsx("p",{className:"text-sm text-red-500",children:a.longitude})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"Admin Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-base",children:"Active Status"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable or disable the business listing"})]}),e.jsx(C,{checked:t.status,onCheckedChange:s=>i("status",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-base",children:"Verified Status"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Mark business as verified"})]}),e.jsx(C,{checked:t.is_vierify,onCheckedChange:s=>i("is_vierify",s)})]})]})]}),e.jsxs("div",{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-medium",children:"SEO Settings"})]}),e.jsxs(S,{value:f,onValueChange:s=>b(s),children:[e.jsxs(w,{className:"grid w-full grid-cols-2 mb-6 max-w-md",children:[e.jsxs(x,{value:"en",className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‡ºðŸ‡¸"}),e.jsx("span",{children:"English"})]}),e.jsxs(x,{value:"km",className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‡°ðŸ‡­"}),e.jsx("span",{children:"ážáŸ’áž˜áŸ‚ážš"})]})]}),e.jsxs(p,{value:"en",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"seo_title_en",children:"SEO Title (English)"}),e.jsx(l,{id:"seo_title_en",type:"text",value:t.seo_title_translations.en,onChange:s=>{const r=s.target.value;i("seo_title_translations",{...t.seo_title_translations,en:r}),i("seo_title",r)},placeholder:"SEO title for search engines",className:`max-w-2xl ${a["seo_title_translations.en"]||a.seo_title?"border-red-500":""}`}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.seo_title_translations.en.length,"/60 characters",t.seo_title_translations.en.length>60&&e.jsx("span",{className:"text-amber-600 ml-2",children:"May be truncated in search results"})]}),(a["seo_title_translations.en"]||a.seo_title)&&e.jsx("p",{className:"text-sm text-red-500",children:a["seo_title_translations.en"]||a.seo_title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"seo_description_en",children:"SEO Description (English)"}),e.jsx(m,{id:"seo_description_en",value:t.seo_description_translations.en,onChange:s=>{const r=s.target.value;i("seo_description_translations",{...t.seo_description_translations,en:r}),i("seo_description",r)},placeholder:"SEO description for search engines (150-160 characters recommended)",rows:3,className:`max-w-2xl ${a["seo_description_translations.en"]||a.seo_description?"border-red-500":""}`}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.seo_description_translations.en.length,"/160 characters",t.seo_description_translations.en.length>160&&e.jsx("span",{className:"text-amber-600 ml-2",children:"May be truncated in search results"})]}),(a["seo_description_translations.en"]||a.seo_description)&&e.jsx("p",{className:"text-sm text-red-500",children:a["seo_description_translations.en"]||a.seo_description})]})]}),e.jsxs(p,{value:"km",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"seo_title_km",children:"áž…áŸ†ážŽáž„áž‡áž¾áž„ SEO (ážáŸ’áž˜áŸ‚ážš)"}),e.jsx(l,{id:"seo_title_km",type:"text",value:t.seo_title_translations.km,onChange:s=>{i("seo_title_translations",{...t.seo_title_translations,km:s.target.value})},placeholder:"áž…áŸ†ážŽáž„áž‡áž¾áž„ SEO ážŸáž˜áŸ’ážšáž¶áž”áŸ‹áž˜áŸ‰áž¶ážŸáŸŠáž¸áž“ážŸáŸ’ážœáŸ‚áž„ážšáž€",className:`max-w-2xl ${a["seo_title_translations.km"]?"border-red-500":""}`}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.seo_title_translations.km.length,"/60 ážáž½áž¢áž€áŸ’ážŸážš"]}),a["seo_title_translations.km"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["seo_title_translations.km"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"seo_description_km",children:"áž€áž¶ážšáž–áž·áž–ážŽáŸŒáž“áž¶ SEO (ážáŸ’áž˜áŸ‚ážš)"}),e.jsx(m,{id:"seo_description_km",value:t.seo_description_translations.km,onChange:s=>{i("seo_description_translations",{...t.seo_description_translations,km:s.target.value})},placeholder:"áž€áž¶ážšáž–áž·áž–ážŽáŸŒáž“áž¶ SEO ážŸáž˜áŸ’ážšáž¶áž”áŸ‹áž˜áŸ‰áž¶ážŸáŸŠáž¸áž“ážŸáŸ’ážœáŸ‚áž„ážšáž€",rows:3,className:`max-w-2xl ${a["seo_description_translations.km"]?"border-red-500":""}`}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.seo_description_translations.km.length,"/160 ážáž½áž¢áž€áŸ’ážŸážš"]}),a["seo_description_translations.km"]&&e.jsx("p",{className:"text-sm text-red-500",children:a["seo_description_translations.km"]})]})]})]}),e.jsx("div",{className:"space-y-4 pt-4 border-t",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"seo_image",children:"SEO Image"}),e.jsx(l,{id:"seo_image",type:"file",accept:"image/*",onChange:s=>{const r=s.target.files?.[0];r&&i("seo_image",r)},className:`max-w-md ${a.seo_image?"border-red-500":""}`}),a.seo_image&&e.jsx("p",{className:"text-sm text-red-500",children:a.seo_image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"seo_keywords",children:"SEO Keywords (comma-separated)"}),e.jsx(l,{id:"seo_keywords",type:"text",value:t.seo_keywords.join(", "),onChange:s=>{const r=s.target.value.split(",").map(_=>_.trim()).filter(_=>_.length>0);i("seo_keywords",r)},placeholder:"tire, car, automotive, repair, service",className:`max-w-2xl ${a.seo_keywords?"border-red-500":""}`}),a.seo_keywords&&e.jsx("p",{className:"text-sm text-red-500",children:a.seo_keywords})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[e.jsx("a",{href:route("businesses.index"),children:e.jsx(k,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(k,{type:"submit",disabled:y,size:"lg",children:y?"Creating...":"Create Business"})]})]})})]})})]})}export{De as default};
