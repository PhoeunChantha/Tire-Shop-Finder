import{r as t,j as s}from"./app-m4SEsFiE.js";import{I}from"./input-5V3zXozb.js";import{L as b}from"./label-KmRgxdzX.js";import{I as P}from"./input-error-BjPDUuFP.js";import{B as E}from"./button-B-WEzdAj.js";import{X as F}from"./index-9BWeTyv_.js";import{U as $}from"./upload-CVCRsBzD.js";function M({id:a,label:f,value:o,currentImage:m,onChange:r,error:g,accept:v="image/*",previewClassName:j="max-w-xs h-20 object-cover rounded-md border",className:N="",maxSize:i=5,required:h=!1}){const[u,l]=t.useState(null),[y,p]=t.useState(!1),c=t.useCallback(e=>{if(!e){r(null),l(null);return}if(e.size>i*1024*1024){alert(`File size must be less than ${i}MB`);return}if(!e.type.startsWith("image/")){alert("Please select an image file");return}r(e);const n=new FileReader;n.onloadend=()=>{l(n.result)},n.readAsDataURL(e)},[r,i]),w=t.useCallback(e=>{const n=e.target.files?.[0]||null;c(n)},[c]),x=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),e.type==="dragenter"||e.type==="dragover"?p(!0):e.type==="dragleave"&&p(!1)},[]),D=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&c(e.dataTransfer.files[0])},[c]),k=t.useCallback(()=>{r(null),l(null);const e=document.getElementById(a);e&&(e.value="")},[r,a]);t.useEffect(()=>{o||l(m||null)},[m,o]);const C=u||o&&u,d=o?.name;return s.jsxs("div",{className:`space-y-3 ${N}`,children:[s.jsx(b,{htmlFor:a,className:h?"required":"",children:f}),s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${y?"border-blue-500 bg-blue-50":g?"border-red-300":"border-gray-300 hover:border-gray-400"}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:D,children:[C?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:u,alt:`${f} preview`,className:`mx-auto ${j}`}),s.jsx(E,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:k,children:s.jsx(F,{className:"w-4 h-4"})}),s.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:d?`New: ${d}`:"Current image"})]}):s.jsxs("div",{className:"text-center",children:[s.jsx($,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsxs("div",{className:"mt-4",children:[s.jsxs(b,{htmlFor:a,className:"cursor-pointer",children:[s.jsx("span",{className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:"Click to upload"}),s.jsx("span",{className:"text-sm text-gray-500",children:" or drag and drop"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["PNG, JPG, GIF up to ",i,"MB"]})]})]}),s.jsx(I,{id:a,type:"file",accept:v,onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",required:h})]}),s.jsx(P,{message:g}),d&&s.jsxs("p",{className:"text-sm text-green-600 flex items-center gap-1",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),"New file selected: ",d]})]})}export{M as U};
