import{r as j,a as z,j as e,L as _}from"./app-m4SEsFiE.js";import{I as f}from"./input-5V3zXozb.js";import{B as x}from"./button-B-WEzdAj.js";import{S as w,a as b,b as y,c as C,d as p}from"./select-Bucetb1j.js";import{C as O,c as T}from"./card-DAZkrJCd.js";import{F as $}from"./filter-AGlDKPsx.js";import{X as k}from"./index-9BWeTyv_.js";import{T as I}from"./tag-A9Juhgz6.js";import{C as V}from"./calendar-DFZ-2_aj.js";import{S as L}from"./search-DxnUE-sH.js";import{C as R}from"./chevron-left-CWJJo8rP.js";import{C as A}from"./chevron-right-BHx-thNb.js";function B({value:t,onChange:a,placeholder:c="Search..."}){return e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(L,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(f,{placeholder:c,value:t||"",onChange:d=>a(d.target.value),className:"pl-8"}),t&&e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>a(""),className:"absolute right-1 top-1 h-6 w-6 p-0",children:e.jsx(k,{className:"h-4 w-4"})})]})}function F({value:t,onChange:a,options:c,placeholder:d="Select...",icon:l=null}){const m=l||I,i=c.map(r=>({...r,value:r.value===""?"__all__":r.value.toString()})),u=i.find(r=>r.value==="__all__")||i[0],v=t&&t!==""?t.toString():u.value,N=r=>{a(r==="__all__"?"":r)};return e.jsxs("div",{className:"flex items-center gap-2 min-w-[150px]",children:[e.jsx(m,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(w,{value:v,onValueChange:N,children:[e.jsx(b,{children:e.jsx(y,{placeholder:d})}),e.jsx(C,{children:i.map(r=>e.jsx(p,{value:r.value,children:r.label},r.value))})]})]})}function q({startDate:t,endDate:a,onStartChange:c,onEndChange:d}){const l=i=>{const u=i.target.value;console.log("Start date changed:",u),c(u)},m=i=>{const u=i.target.value;console.log("End date changed:",u),d(u)};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(f,{type:"date",value:t||"",onChange:l,className:"w-auto"}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsx(f,{type:"date",value:a||"",onChange:m,className:"w-auto"})]})}function J({value:t,onChange:a}){const c=t?t.toString():"10";return e.jsxs(w,{value:c,onValueChange:d=>a(Number(d)),children:[e.jsx(b,{className:"w-[80px]",children:e.jsx(y,{})}),e.jsxs(C,{children:[e.jsx(p,{value:"5",children:"5"}),e.jsx(p,{value:"10",children:"10"}),e.jsx(p,{value:"25",children:"25"}),e.jsx(p,{value:"50",children:"50"}),e.jsx(p,{value:"100",children:"100"})]})]})}function se({filters:t={},config:a={},onFilterChange:c=void 0,showAdvanced:d=!1}){const[l,m]=j.useState(()=>({...{search:"",per_page:10,email_verified:"",created_date_start:"",created_date_end:"",page:1},...t})),[i,u]=j.useState(d),v=j.useRef(),r={...{search:{enabled:!0,placeholder:"Search...",debounce:300},perPage:{enabled:!0,default:10}},...a};j.useEffect(()=>{m(s=>({...{search:"",per_page:10,email_verified:"",created_date_start:"",created_date_end:"",page:1},...t}))},[t]),j.useEffect(()=>{const s=JSON.stringify(l);if(v.current===s)return;v.current=s;const n=setTimeout(()=>{if(c)c(l);else{const o=Object.fromEntries(Object.entries(l).filter(([g,S])=>S!==""&&S!=null));z.get(window.location.pathname,o,{preserveState:!0,preserveScroll:!0})}},r.search.debounce);return()=>clearTimeout(n)},[l]);const h=(s,n)=>{console.log(`Updating filter: ${s} = ${n}`),m(o=>{const g={...o,[s]:n};return console.log("New filters:",g),g})},E=()=>{const s={search:"",per_page:l.per_page||r.perPage.default,email_verified:"",created_date_start:"",created_date_end:"",page:1};m(s)},P=Object.entries(l).some(([s,n])=>s!=="per_page"&&s!=="page"&&n!==""&&n!=null);return e.jsxs("div",{className:"space-y-4",children:[i&&a.advancedFilters&&e.jsx(O,{children:e.jsx(T,{className:"pt-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.advancedFilters.map((s,n)=>s.type==="select"?e.jsx(F,{value:l[s.key],onChange:o=>h(s.key,o),options:s.options,placeholder:s.placeholder,icon:s.icon},n):s.type==="date_range"?e.jsx(q,{startDate:l[`${s.key}_start`],endDate:l[`${s.key}_end`],onStartChange:o=>h(`${s.key}_start`,o),onEndChange:o=>h(`${s.key}_end`,o)},n):null)})})}),e.jsxs("div",{className:"flex items-center py-2 justify-between gap-4",children:[r.perPage?.enabled&&e.jsx(J,{value:l.per_page,onChange:s=>h("per_page",s)}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"flex items-center flex-1 gap-4",children:[a.quickFilters?.map((s,n)=>s.type==="select"?e.jsx(F,{value:l[s.key],onChange:o=>h(s.key,o),options:s.options,placeholder:s.placeholder,icon:s.icon},n):null),a.advancedFilters&&e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>u(!i),className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Filters"]}),P&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:E,className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Clear"]})]}),e.jsx("div",{className:"space-x-2",children:r.search?.enabled&&e.jsx(B,{value:l.search,onChange:s=>h("search",s),placeholder:r.search.placeholder})})]})]})]})}function te({paginatedData:t}){return!t||t.total<=t.per_page?null:e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t.from||0," to ",t.to||0," of ",t.total||0," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.prev_page_url&&e.jsx(_,{href:t.prev_page_url,children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(R,{className:"h-4 w-4"}),"Previous"]})}),t.links?.slice(1,-1).map((a,c)=>e.jsx(_,{href:a.url||"#",className:a.active?"pointer-events-none":"",children:e.jsx(x,{variant:a.active?"default":"outline",size:"sm",disabled:!a.url,children:a.label})},c)),t.next_page_url&&e.jsx(_,{href:t.next_page_url,children:e.jsxs(x,{variant:"outline",size:"sm",children:["Next",e.jsx(A,{className:"h-4 w-4"})]})})]})]})}export{se as D,te as P};
