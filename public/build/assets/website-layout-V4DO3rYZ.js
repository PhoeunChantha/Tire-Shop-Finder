import{r as m,j as e,L as t,d as j,H as A}from"./app-m4SEsFiE.js";import{i as N,S as M,L as _,D as z,a as B,b as H,d as R,j as W,g as V}from"./dropdown-menu-BE1c-vsa.js";import{C as G,a as q}from"./chevron-up-DZ2i7E5U.js";import{B as $,a as X}from"./button-B-WEzdAj.js";import{G as Y}from"./globe-CrBjwrOr.js";import{C as J}from"./check-Cd4UBeWr.js";import{u as K}from"./use-business-settings-z5aa--sV.js";import{X as Q}from"./index-9BWeTyv_.js";import{M as Z,F as ee}from"./menu-BBZNjlwA.js";import{S as se,M as te,P as C}from"./send-BhHq3YGm.js";import{E as re}from"./external-link-MMDSQ-QP.js";import{M as E}from"./map-pin-BAgRtuu2.js";import{M as S}from"./mail-BwgBbrBr.js";import{S as ae}from"./search-DxnUE-sH.js";function ne({user:a,className:l=""}){const[o,i]=m.useState(!1),c=m.useRef(null),{t:r}=N();m.useEffect(()=>{const x=s=>{c.current&&!c.current.contains(s.target)&&i(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const d=()=>a?.roles?.some(x=>["admin","super-admin"].includes(x.name))?"/admin/dashboard":"/user-dashboard",g=x=>x.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().substring(0,2);return e.jsxs("div",{className:`relative ${l}`,ref:c,children:[e.jsxs("button",{onClick:()=>i(!o),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors focus:outline-none",children:[a.avatar?e.jsx("img",{src:a.avatar,alt:a.name,className:"w-8 h-8 rounded-full object-cover border border-gray-200"}):e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:g(a.name)}),e.jsx("span",{className:"hidden sm:block truncate max-w-[120px]",children:a.name}),e.jsx(G,{className:`w-4 h-4 transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.email})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(t,{href:d(),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>i(!1),children:[e.jsx(M,{className:"w-4 h-4 mr-3 text-gray-400"}),r("dashboard")]}),e.jsx("hr",{className:"my-1"}),e.jsxs(t,{href:"/logout",method:"post",as:"button",className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>i(!1),children:[e.jsx(_,{className:"w-4 h-4 mr-3 text-gray-400"}),r("logout")]})]})]})]})}function ie({user:a,onLinkClick:l}){const{t:o}=N(),i=()=>a?.roles?.some(r=>["admin","super-admin"].includes(r.name))?"/admin/dashboard":"/user-dashboard",c=r=>r.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().substring(0,2);return e.jsxs("div",{className:"pt-4 pb-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center px-3 py-2 space-x-3",children:[a.avatar?e.jsx("img",{src:a.avatar,alt:a.name,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}):e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:c(a.name)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-base font-medium text-gray-900 truncate",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.email})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs(t,{href:i(),className:"flex items-center px-3 py-2 text-base font-medium text-gray-500 hover:text-blue-600 hover:bg-gray-50",onClick:l,children:[e.jsx(M,{className:"w-5 h-5 mr-3 text-gray-400"}),o("dashboard")]}),e.jsxs(t,{href:"/logout",method:"post",as:"button",className:"flex items-center w-full px-3 py-2 text-base font-medium text-gray-500 hover:text-blue-600 hover:bg-gray-50",onClick:l,children:[e.jsx(_,{className:"w-5 h-5 mr-3 text-gray-400"}),o("logout")]})]})]})}function L({className:a}){const{locale:l}=j().props,o=[{code:"en",name:"English",flag:"🇺🇸"},{code:"km",name:"ខ្មែរ",flag:"🇰🇭"}],i=o.find(r=>r.code===l)||o[0],c=r=>{window.location.href=`/language/${r}`};return e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsxs($,{variant:"outline",size:"sm",className:a,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:i.name}),e.jsx("span",{className:"sm:hidden",children:i.flag})]})}),e.jsx(H,{align:"end",className:"w-48",children:o.map(r=>e.jsxs(R,{onClick:()=>c(r.code),className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:r.flag}),e.jsx("span",{children:r.name})]}),l===r.code&&e.jsx(J,{className:"h-4 w-4"})]},r.code))})]})}function le({className:a,threshold:l=300}){const[o,i]=m.useState(!1);m.useEffect(()=>{const r=()=>{const d=window.pageYOffset||document.documentElement.scrollTop,g=document.documentElement.scrollHeight,x=window.innerHeight,s=d+x>=g-l;i(s&&d>l)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[l]);const c=()=>{window.scrollTo({top:0,behavior:"smooth"})};return o?e.jsx($,{onClick:c,size:"icon",className:X("fixed bottom-4 right-4 z-50 shadow-lg hover:shadow-xl transition-all duration-300","bg-blue-600 hover:bg-blue-700 text-white","rounded-full w-12 h-12",a),"aria-label":"Scroll to top",children:e.jsx(q,{className:"h-6 w-6"})}):null}function ye({children:a,title:l,businessSettings:o}){const{auth:i}=j().props,{url:c}=j(),[r,d]=m.useState(!1),[g,x]=m.useState([]),{t:s}=N(),{locale:v}=W(),b=h=>h==="/"?c==="/":c.startsWith(h),[T,y]=m.useState(!1),{businessData:n,getBusinessName:D,getWebsiteDescription:P,hasSocialMedia:f}=K(o),p=D(v),F=P(v),I=m.useCallback(()=>{y(!0)},[]),U=m.useCallback(()=>{y(!1)},[]);m.useEffect(()=>{(async()=>{try{const u=await fetch("/api/public/services");if(u.ok){const O=await u.json();x(O)}}catch(u){console.error("Failed to fetch services:",u)}})()},[]);const w=n.systemLogo&&!T?V(n.systemLogo,"business-settings"):null,k=()=>w?e.jsx("img",{src:w,alt:`${p} Logo`,className:"w-10 h-10 rounded-full object-cover bg-white dark:bg-black",onError:I,onLoad:U,loading:"lazy"}):e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(ae,{className:"w-5 h-5 text-white"})});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(A,{title:l?`${l}`:"Tire Shop Finder Cambodia"}),e.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(t,{href:"/",className:"flex items-center space-x-2",children:[k(),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:p})]}),e.jsxs("div",{className:"hidden md:ml-10 md:flex md:space-x-8",children:[e.jsx(t,{href:"/",className:`px-3 py-2 text-sm font-medium transition-colors ${b("/")?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-600"}`,children:s("home")}),e.jsx(t,{href:"/tire-shops",className:`px-3 py-2 text-sm font-medium transition-colors ${b("/tire-shops")?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-600"}`,children:s("find_tire_shops")}),e.jsx(t,{href:"/about",className:`px-3 py-2 text-sm font-medium transition-colors ${b("/about")?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-600"}`,children:s("about")}),e.jsx(t,{href:"/contact",className:`px-3 py-2 text-sm font-medium transition-colors ${b("/contact")?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-600"}`,children:s("contact")})]})]}),e.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[e.jsx(L,{}),i?.user?e.jsx(ne,{user:i.user}):e.jsxs(e.Fragment,{children:[e.jsx(t,{href:"/login",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3",children:s("login")}),e.jsx(t,{href:"/register",className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-3",children:s("register")})]})]}),e.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[e.jsx(L,{}),e.jsx("button",{onClick:()=>d(!r),className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:text-gray-700",children:r?e.jsx(Q,{className:"h-6 w-6"}):e.jsx(Z,{className:"h-6 w-6"})})]})]}),r&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t",children:[e.jsx(t,{href:"/",className:`block px-3 py-2 text-base font-medium ${b("/")?"text-blue-600 bg-blue-50":"text-gray-500 hover:text-blue-600 hover:bg-gray-50"}`,children:s("home")}),e.jsx(t,{href:"/tire-shops",className:`block px-3 py-2 text-base font-medium ${b("/tire-shops")?"text-blue-600 bg-blue-50":"text-gray-500 hover:text-blue-600 hover:bg-gray-50"}`,children:s("find_tire_shops")}),e.jsx(t,{href:"/about",className:`block px-3 py-2 text-base font-medium ${b("/about")?"text-blue-600 bg-blue-50":"text-gray-500 hover:text-blue-600 hover:bg-gray-50"}`,children:s("about")}),e.jsx(t,{href:"/contact",className:`block px-3 py-2 text-base font-medium ${b("/contact")?"text-blue-600 bg-blue-50":"text-gray-500 hover:text-blue-600 hover:bg-gray-50"}`,children:s("contact")}),i?.user?e.jsx(ie,{user:i.user,onLinkClick:()=>d(!1)}):e.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{href:"/login",className:"block px-3 py-2 text-base font-medium text-gray-500 hover:text-blue-600",onClick:()=>d(!1),children:s("login")}),e.jsx(t,{href:"/register",className:"block px-3 py-2 text-base font-medium text-blue-600 hover:text-blue-700",onClick:()=>d(!1),children:s("register")})]})})]})})]})}),e.jsx("main",{className:"flex-1",children:a}),e.jsx("footer",{className:"bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:k()}),e.jsxs("span",{className:"text-xl font-bold",children:[" ",p]})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:F||s("website_description")}),e.jsxs("div",{className:"flex space-x-4",children:[f("facebook")&&e.jsx("a",{href:n.socialFacebook,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Facebook",children:e.jsx(ee,{className:"w-5 h-5"})}),f("telegram")&&e.jsx("a",{href:n.socialTelegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Telegram",children:e.jsx(se,{className:"w-5 h-5"})}),f("messenger")&&e.jsx("a",{href:n.socialMessenger,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Messenger",children:e.jsx(te,{className:"w-5 h-5"})}),Object.entries(n.customSocialMedia||{}).map(([h,u])=>u.url&&e.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":u.name,title:u.name,children:e.jsx(re,{className:"w-5 h-5"})},h))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("quick_links")}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(t,{href:"/",className:"text-gray-300 hover:text-white transition-colors",children:s("home")})}),e.jsx("li",{children:e.jsx(t,{href:"/tire-shops",className:"text-gray-300 hover:text-white transition-colors",children:s("find_tire_shops")})}),e.jsx("li",{children:e.jsxs(t,{href:"/about",className:"text-gray-300 hover:text-white transition-colors",children:[s("about")," ",s("us")]})}),e.jsx("li",{children:e.jsx(t,{href:"/contact",className:"text-gray-300 hover:text-white transition-colors",children:s("contact")})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("services")}),e.jsx("ul",{className:"space-y-2 text-sm",children:g.length>0?g.map(h=>e.jsx("li",{children:e.jsx(t,{href:`/tire-shops?service=${encodeURIComponent(h.name)}`,className:"text-gray-300 hover:text-white transition-colors",children:h.name})},h.id)):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(t,{href:"/tire-shops?service=tire installation",className:"text-gray-300 hover:text-white transition-colors",children:s("tire_installation")})}),e.jsx("li",{children:e.jsx(t,{href:"/tire-shops?service=tire repair",className:"text-gray-300 hover:text-white transition-colors",children:s("tire_repair")})}),e.jsx("li",{children:e.jsx(t,{href:"/tire-shops?service=wheel alignment",className:"text-gray-300 hover:text-white transition-colors",children:s("wheel_alignment")})}),e.jsx("li",{children:e.jsx(t,{href:"/tire-shops?service=tire replacement",className:"text-gray-300 hover:text-white transition-colors",children:s("tire_replacement")})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("contact_info")}),e.jsxs("div",{className:"space-y-3 text-sm",children:[n.contactAddress&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(E,{className:"w-4 h-4 text-blue-400 mt-0.5"}),e.jsx("span",{className:"text-gray-300",children:n.contactAddress})]}),n.contactPhone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"w-4 h-4 text-blue-400"}),e.jsx("a",{href:`tel:${n.contactPhone}`,className:"text-gray-300 hover:text-white transition-colors",children:n.contactPhone})]}),n.contactEmail&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-4 h-4 text-blue-400"}),e.jsx("a",{href:`mailto:${n.contactEmail}`,className:"text-gray-300 hover:text-white transition-colors",children:n.contactEmail})]}),!n.contactAddress&&!n.contactPhone&&!n.contactEmail&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-gray-300",children:"Phnom Penh, Cambodia"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-gray-300",children:"+855 12 345 678"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-gray-300",children:"info@tireshopfinder.kh"})]})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800 text-center text-sm text-gray-400",children:e.jsx("p",{children:"© 2024 Tire Shop Finder Cambodia. All rights reserved."})})]})}),e.jsx(le,{})]})}export{ye as W};
