import{j as e,r as m,u as H,H as F}from"./app-m4SEsFiE.js";import{A as k}from"./app-layout-BumpU3EB.js";import{C as B,a as I,b as R,d as U,c as _}from"./card-DAZkrJCd.js";import{D as G}from"./DeleteModal-BTtVXePO.js";import{D as L,P as W}from"./PaginationWrapper-Bp2rTVOg.js";import{T as q,a as z,b as D,c,d as J,e as d}from"./table-zhjCq3UJ.js";import{B as p}from"./badge-CvBMkbv0.js";import{A as K}from"./action-button-BLUJYvYe.js";import{S as N}from"./shield-BLMtoxU7.js";import Q from"./create-D0mu8MAP.js";import{u as V,P as X}from"./use-permissionForm-CPhWdcYW.js";import{D as Y,b as Z,c as $,d as ee,e as se}from"./dialog-B3QHYN-w.js";/* empty css            */import"./button-B-WEzdAj.js";import"./index-89Llf8Yk.js";import"./index-D61C-zyG.js";import"./index-9BWeTyv_.js";import"./index-D5fK6wwI.js";import"./dropdown-menu-BE1c-vsa.js";import"./index-BMjyTS6w.js";import"./collapsible-CJSf55eg.js";import"./chevron-right-BHx-thNb.js";import"./app-logo-icon-BvgPms2S.js";import"./use-business-settings-z5aa--sV.js";import"./building-CDBhthyV.js";import"./users-CCvNB95W.js";import"./avatar-7NHQ17s9.js";import"./triangle-alert-DzJNMw5Q.js";import"./input-5V3zXozb.js";import"./select-Bucetb1j.js";import"./index-CXFdqqwl.js";import"./chevron-up-DZ2i7E5U.js";import"./check-Cd4UBeWr.js";import"./filter-AGlDKPsx.js";import"./tag-A9Juhgz6.js";import"./calendar-DFZ-2_aj.js";import"./search-DxnUE-sH.js";import"./chevron-left-CWJJo8rP.js";import"./refresh-cw-Tfuecpvj.js";import"./trash-2-BkS2BnsL.js";import"./square-pen-DmLpV6cU.js";import"./eye-CCNsDBNk.js";import"./plus-CnyTP5s-.js";import"./label-KmRgxdzX.js";import"./InputError-CjroZfWt.js";import"./minus-iT1XeTgz.js";function te({permissions:o,getPermissionActions:a,visibleColumns:t=["name","actions"]}){return e.jsx("div",{className:"rounded-md border",children:e.jsxs(q,{children:[e.jsx(z,{children:e.jsxs(D,{children:[t.includes("name")&&e.jsx(c,{children:"Permission Name"}),t.includes("module")&&e.jsx(c,{children:"Module"}),t.includes("roles")&&e.jsx(c,{children:"Assigned Roles"}),t.includes("actions")&&e.jsx(c,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(J,{children:o.data?.length?o.data.map(s=>e.jsxs(D,{children:[t.includes("name")&&e.jsx(d,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),s.display_name||s.name]})}),t.includes("module")&&e.jsx(d,{children:e.jsx(p,{variant:"secondary",className:"text-xs",children:s.module||"General"})}),t.includes("roles")&&e.jsx(d,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.roles&&s.roles.length>0?s.roles.slice(0,3).map(r=>e.jsx(p,{variant:"outline",className:"text-xs",children:r.name},r.id)):e.jsx(p,{variant:"outline",className:"text-xs",children:"No roles assigned"}),s.roles&&s.roles.length>3&&e.jsxs(p,{variant:"outline",className:"text-xs",children:["+",s.roles.length-3," more"]})]})}),t.includes("actions")&&e.jsx(d,{children:e.jsx(K,{actions:a(s),item:s,layout:"dropdown",maxInline:1})})]},s.id)):e.jsx(D,{children:e.jsx(d,{colSpan:t.length,className:"h-24 text-center",children:"No permissions found. Create your first permission to get started."})})})]})})}function re(){const[o,a]=m.useState(null),[t,s]=m.useState(!1),[r,n]=m.useState(null),[x,l]=m.useState(!1),{delete:u,processing:h}=H(),f=()=>{},g=()=>{},j=i=>{a(i),s(!0)},P=i=>{n(i),l(!0)};return{editingPermission:o,setEditingPermission:a,editModalOpen:t,setEditModalOpen:s,deletingPermission:r,setDeletingPermission:n,deleteModalOpen:x,setDeleteModalOpen:l,deleting:h,handleDeleteConfirm:()=>{r&&u(route("permissions.destroy",r.id),{preserveScroll:!0,onSuccess:()=>{l(!1),n(null)},onError:i=>{console.log("Delete errors:",i)}})},handlePermissionCreated:f,handlePermissionUpdated:g,getPermissionActions:i=>[{key:"edit",label:"Edit",onClick:()=>j(i),variant:"outline"},{key:"delete",label:"Delete",onClick:()=>P(i),variant:"outline",className:"text-red-600 hover:text-red-700"}],filterConfig:{search:{enabled:!0,placeholder:"Search permissions by name...",debounce:300},perPage:{enabled:!0,default:10}}}}function Xe({auth:o,permissions:a,filters:t}){const{editingPermission:s,editModalOpen:r,setEditModalOpen:n,deletingPermission:x,deleteModalOpen:l,setDeleteModalOpen:u,deleting:h,handleDeleteConfirm:f,getPermissionActions:g,filterConfig:j}=re(),P=s?{name:[s.name]}:{name:[""]},{data:E,setData:C,put:b,processing:i,errors:y,reset:T,nameErrors:M,handleNameChange:S,addPermission:w,removePermission:A}=V(P);m.useEffect(()=>{s&&r&&C("name",[s.name])},[s,r]);const v=O=>{O.preventDefault(),s&&b(route("permissions.update",s.id),{onSuccess:()=>{n(!1),T()}})};return e.jsxs(k,{children:[e.jsx(F,{title:"Permissions"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs(B,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Permissions"]}),e.jsx(U,{children:"Manage user permissions"})]}),e.jsx(Q,{triggerText:"Add Permission"})]}),e.jsxs(_,{children:[e.jsx(L,{filters:t||{},config:j}),e.jsx(te,{permissions:a,getPermissionActions:g}),e.jsx(W,{paginatedData:a})]})]})}),e.jsx(G,{open:l,setOpen:u,onConfirm:f,title:"Delete Permission",description:"Are you sure you want to delete this permission? This action cannot be undone.",itemName:x?.name,confirmText:"Delete Permission",processing:h}),s&&r&&e.jsx(Y,{open:r,onOpenChange:n,children:e.jsxs(Z,{className:"max-w-2xl",children:[e.jsxs($,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Edit Permission: ",s.name]}),e.jsx(se,{children:"Update the permission details to modify access controls."})]}),e.jsx(X,{data:E,errors:y,processing:i,onSubmit:v,submitText:"Update Permission",isEdit:!0,nameErrors:M,handleNameChange:S,addPermission:w,removePermission:A})]})})]})}export{Xe as default};
